!function(){"use strict";var e=e=>new Promise(((t,r)=>{const n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e.url),e.integrity&&n.setAttribute("integrity",e.integrity),e.async&&n.setAttribute("async",e.async.toString()),e.defer&&n.setAttribute("defer",e.defer.toString()),e.crossOrigin&&n.setAttribute("crossorigin",e.crossOrigin),n.onload=t,n.onerror=r,document.head.appendChild(n)}));var t=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();var r=e=>{try{return JSON.parse(e),!0}catch(e){return!1}};var n=e=>window.webkit&&window.webkit.messageHandlers&&e.ios in window.webkit.messageHandlers&&"function"==typeof window.webkit.messageHandlers[e.ios].postMessage?"ios":e.android in window?"android":"";var a=e=>"object"===t(e)?{...e}:"array"===t(e)?[...e]:e;const i=(e,r)=>{if("object"!==t(e))return e;const n={},a=Object.keys(e),s=Object.keys(r);for(let o=0,c=a.length;o<c;o+=1){const c=a[o],u=e[c],l=s.indexOf(c)>-1?r[c]:c;if("object"===t(u))n[l]=i({...u},r);else if("array"===t(u)){n[l]=[...u];for(let e=0,t=u.length;e<t;e+=1)n[l][e]=i(u[e],r)}else n[l]=u}return n};var s=i,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u=function(e,t){return e===t||e!=e&&t!=t},l="object"==typeof o&&o&&o.Object===Object&&o,d=l,h="object"==typeof self&&self&&self.Object===Object&&self,f=d||h||Function("return this")(),m=f.Symbol,E=m,p=Object.prototype,v=p.hasOwnProperty,_=p.toString,O=E?E.toStringTag:void 0;var g=function(e){var t=v.call(e,O),r=e[O];try{e[O]=void 0;var n=!0}catch(e){}var a=_.call(e);return n&&(t?e[O]=r:delete e[O]),a},y=Object.prototype.toString;var S=g,b=function(e){return y.call(e)},I="[object Null]",T="[object Undefined]",A=m?m.toStringTag:void 0;var N=function(e){return null==e?void 0===e?T:I:A&&A in Object(e)?S(e):b(e)};var R=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},D=N,w=R,C="[object AsyncFunction]",L="[object Function]",M="[object GeneratorFunction]",j="[object Proxy]";var P=function(e){if(!w(e))return!1;var t=D(e);return t==L||t==M||t==C||t==j},U=9007199254740991;var V=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=U},F=P,G=V;var x=function(e){return null!=e&&G(e.length)&&!F(e)},q=9007199254740991,k=/^(?:0|[1-9]\d*)$/;var B=function(e,t){var r=typeof e;return!!(t=null==t?q:t)&&("number"==r||"symbol"!=r&&k.test(e))&&e>-1&&e%1==0&&e<t};var $=function(e){return null!=e&&"object"==typeof e};let z="~";function Y(){}Object.create&&(Y.prototype=Object.create(null),(new Y).__proto__||(z=!1));class H{constructor(e,t,r=!1){this.handler=e,this.context=t,this.once=r}}function Q(e,t,r,n,a){if("function"!=typeof r)throw new TypeError("The handler must be a function.");if("symbol"==typeof t&&e._prefix)throw new TypeError("The event name cannot be a symbol when events should be prefixed. Use string literals instead.");const i=new H(r,n||e,a),s=e._prefix?`${e._prefix}${t}`:t;return e._listeners[s]||(e._listeners[s]=[],e._listenerCount+=1),e._listeners[s].push(i),e}function J(e,t){const r=e._prefix?`${e._prefix}${t}`:t;0==--e._listenerCount?e._listeners=new Y:delete e._listeners[r]}function X(e,t,...r){e.parent&&e.parent instanceof Z&&e.parent.emit(t,...r)}class Z{get eventNames(){let e=[];return 0===this._listenerCount||(e=e.concat(Object.keys(this._listeners).map((e=>this._prefix?e.slice(1):e))),Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(this._listeners)))),e}get parent(){return this._parent}set parent(e){this._parent=e}constructor(){this._prefix=z,this._listeners=new Y,this._listenerCount=0,this._parent=void 0}has(e){if("symbol"==typeof e)return Object.getOwnPropertySymbols(this._listeners).includes(e);const t=this._prefix?`${this._prefix}${e}`:e;return Object.keys(this._listeners).includes(t)}on(e,t,r){return Q(this,e,t,r)}once(e,t,r){return Q(this,e,t,r,!0)}off(e,t,r,n=!1){const a=this._prefix?`${this._prefix}${e}`:e;if(!this.has(e))return this;const i=this._listeners[a];if(!t||i.length<=1)return J(this,a),this;const s=i.findIndex((e=>e.handler===t&&e.context===(r||this)&&e.once===n));return s>-1&&i.splice(s,1),this}clear(e){const t=this._prefix?`${this._prefix}${e}`:e;return this.has(e)?J(this,t):(this._listeners=new Y,this._listenerCount=0),this}emit(e,...t){const r=this._prefix?`${this._prefix}${e}`:e;if(this.has(e)||this.has(Z.EVENT_CONFIG.ALL_EVENTS_KEY)){let n=this._listeners[r];if(this.has(Z.EVENT_CONFIG.ALL_EVENTS_KEY)){n=[...n=n||[],...this._listeners[Z.EVENT_CONFIG.ALL_EVENTS_KEY]]}for(let e=n.length;e>=0;e-=1){const a=n[e];if(a){const{handler:e,once:n,context:i}=a;n&&this.off(r,e,i,n),e.call(i,...t)}}return X(this,e,...t),!0}return X(this,e,...t),!1}all(e,t){return Q(this,Z.EVENT_CONFIG.ALL_EVENTS_KEY,e,t)}none(e,t){return this.off(Z.EVENT_CONFIG.ALL_EVENTS_KEY,e,t)}}Z.EVENT_CONFIG={ALL_EVENTS_KEY:"~ALL_EVENTS~"};var W=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a},K=W;var ee,te=function(e,t){return K(t,(function(t){return[t,e[t]]}))},re=f["__core-js_shared__"],ne=(ee=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||""))?"Symbol(src)_1."+ee:"";var ae=function(e){return!!ne&&ne in e},ie=Function.prototype.toString;var se=function(e){if(null!=e){try{return ie.call(e)}catch(e){}try{return e+""}catch(e){}}return""},oe=P,ce=ae,ue=R,le=se,de=/^\[object .+?Constructor\]$/,he=Function.prototype,fe=Object.prototype,me=he.toString,Ee=fe.hasOwnProperty,pe=RegExp("^"+me.call(Ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ve=function(e,t){return null==e?void 0:e[t]},_e=function(e){return!(!ue(e)||ce(e))&&(oe(e)?pe:de).test(le(e))},Oe=ve;var ge=function(e,t){var r=Oe(e,t);return _e(r)?r:void 0},ye=ge(f,"DataView"),Se=ge(f,"Map"),be=ye,Ie=Se,Te=ge(f,"Promise"),Ae=ge(f,"Set"),Ne=ge(f,"WeakMap"),Re=N,De=se,we="[object Map]",Ce="[object Promise]",Le="[object Set]",Me="[object WeakMap]",je="[object DataView]",Pe=De(be),Ue=De(Ie),Ve=De(Te),Fe=De(Ae),Ge=De(Ne),xe=Re;(be&&xe(new be(new ArrayBuffer(1)))!=je||Ie&&xe(new Ie)!=we||Te&&xe(Te.resolve())!=Ce||Ae&&xe(new Ae)!=Le||Ne&&xe(new Ne)!=Me)&&(xe=function(e){var t=Re(e),r="[object Object]"==t?e.constructor:void 0,n=r?De(r):"";if(n)switch(n){case Pe:return je;case Ue:return we;case Ve:return Ce;case Fe:return Le;case Ge:return Me}return t});var qe=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var ke=te,Be=xe,$e=qe,ze=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r},Ye="[object Map]",He="[object Set]";var Qe=function(e){return function(t){var r=Be(t);return r==Ye?$e(t):r==He?ze(t):ke(t,e(t))}};var Je=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},Xe=N,Ze=$,We="[object Arguments]";var Ke=function(e){return Ze(e)&&Xe(e)==We},et=$,tt=Object.prototype,rt=tt.hasOwnProperty,nt=tt.propertyIsEnumerable,at=Ke(function(){return arguments}())?Ke:function(e){return et(e)&&rt.call(e,"callee")&&!nt.call(e,"callee")},it=at,st=Array.isArray,ot={};var ct=function(){return!1};!function(e,t){var r=f,n=ct,a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,s=i&&i.exports===a?r.Buffer:void 0,o=(s?s.isBuffer:void 0)||n;e.exports=o}({get exports(){return ot},set exports(e){ot=e}},ot);var ut=N,lt=V,dt=$,ht={};ht["[object Float32Array]"]=ht["[object Float64Array]"]=ht["[object Int8Array]"]=ht["[object Int16Array]"]=ht["[object Int32Array]"]=ht["[object Uint8Array]"]=ht["[object Uint8ClampedArray]"]=ht["[object Uint16Array]"]=ht["[object Uint32Array]"]=!0,ht["[object Arguments]"]=ht["[object Array]"]=ht["[object ArrayBuffer]"]=ht["[object Boolean]"]=ht["[object DataView]"]=ht["[object Date]"]=ht["[object Error]"]=ht["[object Function]"]=ht["[object Map]"]=ht["[object Number]"]=ht["[object Object]"]=ht["[object RegExp]"]=ht["[object Set]"]=ht["[object String]"]=ht["[object WeakMap]"]=!1;var ft=function(e){return dt(e)&&lt(e.length)&&!!ht[ut(e)]};var mt=function(e){return function(t){return e(t)}},Et={};!function(e,t){var r=l,n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,i=a&&a.exports===n&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s}({get exports(){return Et},set exports(e){Et=e}},Et);var pt=ft,vt=mt,_t=Et&&Et.isTypedArray,Ot=_t?vt(_t):pt,gt=Je,yt=it,St=st,bt=ot,It=B,Tt=Ot,At=Object.prototype.hasOwnProperty;var Nt=function(e,t){var r=St(e),n=!r&&yt(e),a=!r&&!n&&bt(e),i=!r&&!n&&!a&&Tt(e),s=r||n||a||i,o=s?gt(e.length,String):[],c=o.length;for(var u in e)!t&&!At.call(e,u)||s&&("length"==u||a&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||It(u,c))||o.push(u);return o},Rt=Object.prototype;var Dt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Rt)};var wt=function(e,t){return function(r){return e(t(r))}},Ct=wt(Object.keys,Object),Lt=Dt,Mt=Ct,jt=Object.prototype.hasOwnProperty;var Pt=function(e){if(!Lt(e))return Mt(e);var t=[];for(var r in Object(e))jt.call(e,r)&&"constructor"!=r&&t.push(r);return t},Ut=Nt,Vt=Pt,Ft=x;var Gt=function(e){return Ft(e)?Ut(e):Vt(e)},xt=Qe(Gt),qt=xt,kt=W;var Bt=function(e,t){return kt(t,(function(t){return e[t]}))},$t=Bt,zt=Gt;var Yt=function(e){return null==e?[]:$t(e,zt(e))};const Ht=(e,t,r,n={})=>{const a=["namespace","module","method","message"][t],i=r[e[a]-1];return i&&(n[a]=i.text,i.children&&i.children.length)?Ht(e,t+1,i.children,n):n};class Qt{get level(){return Object.keys(Qt.TYPES)[this.type-1].toLowerCase()}get plainData(){return{createdAt:new Date(this.createdAt).toJSON(),level:this.level,namespace:this.namespace,module:this.module,method:this.method,message:this.message,internalMessage:this.internalMessage}}constructor(e,t,r,n,a,i=undefined){this.type=e,this.namespace=t,this.module=r,this.method=n,this.message=a,this.internalMessage=i,this.createdAt=Date.now()}includes(e){return!!this.internalMessage&&this.internalMessage.includes(e)}toJSON(e=!1){const{plainData:t}=this;return JSON.stringify(e?s(t,Qt.SHORTNAME_MAPPING):t)}prettify(e,t,r={abbreviate:!1,prefix:void 0,delimiter:" | "}){if(!0===Yt(Qt.FORMATS).includes(e)){const{plainData:n}=this,a={...n,...Ht(n,0,t)};if(e===Qt.FORMATS.JSON)return JSON.stringify(r.abbreviate?s(a,Qt.SHORTNAME_MAPPING):a);let i=[];return i=i.concat(qt(a).map((([e,t])=>`${e.toUpperCase()}:${t}`))),r.prefix&&i.push(r.prefix),i.reverse().join(r.delimiter)}return""}}Qt.TYPES=Object.defineProperties({},{INFO:{value:1,enumerable:!0},WARNING:{value:2,enumerable:!0},ERROR:{value:3,enumerable:!0},FATAL:{value:4,enumerable:!0}}),Qt.FORMATS=Object.defineProperties({},{JSON:{value:1,enumerable:!0},LOG:{value:2,enumerable:!0}}),Qt.fromJSON=e=>{const t=JSON.parse(e);if(t.level&&void 0===t.type){const[,e]=qt(Qt.TYPES).find((([e])=>e.toLowerCase()===t.level));t.type=e}const{type:r,namespace:n,module:a,method:i,message:s,internalMessage:o}=t;return new Qt(r,n,a,i,s,o)},Qt.SHORTNAME_MAPPING={level:"lv",type:"tp",namespace:"ns",module:"md",method:"mt",message:"ms",internalMessage:"im",createdAt:"ca"};var Jt=Qt;class Xt{get size(){return this.items.length}constructor(e){this.items=[];for(let t=0,r=e.length;t<r;t+=1)this.enqueue(e[t])}enqueue(e){this.items.push(e)}dequeue(){return this.items.shift()}flush(){this.items=[]}}const Zt=(e,t)=>{try{const{options:n}=e;e.pending=!0;const a=Array.from(t),i=a.slice(1,a.length),s=a[0];let o,c=((e,t)=>{const{options:r,facades:n}=e;if(r.multiTenancy){const e="number"==typeof t[0]?t[0]:r.defaultTenant;return n.get(e)}return n.get(0)})(e,i);c||(c=((e,t)=>{const{facadeFactory:r,options:n}=e,a=r(e);if(n.multiTenancy){const r="number"==typeof t[0]?t[0]:n.defaultTenant;e.facades.set(r,a)}else e.facades.set(0,a);return a})(e,i)),o=!0===n.multiTenancy&&"number"==typeof i[0]?i.slice(1,i.length):i;const u=c[s](...o);!0===(r=u,Boolean(r&&"function"==typeof r.then))?u.then((t=>e.emit("executed",t))).catch((t=>e.emit("error",t))):e.emit("executed",s,u)}catch(t){e.emit("error",t)}var r};class Wt extends Z{constructor(e=undefined,t={},r=[]){super(),this.pending=!1,this.failed=!1,this.queue=new Xt(r),this.facades=new Map,this.facadeFactory=e,this.options={mode:1,multiTenancy:!1,continueOnError:!0,logging:!1,defaultTenant:1,onError:void 0,onExecuted:void 0,...t},this.on("executed",(e=>((e,t)=>{const{options:r}=e;r.onExecuted&&"function"==typeof r.onExecuted&&r.onExecuted(t),e.pending=!1,e.failed=!1,r.mode===Wt.MODE.AUTO&&e.dequeue()})(this,e))),this.on("error",(e=>((e,t)=>{const{options:r}=e;r.logging&&console.error(t),r.onError&&"function"==typeof r.onError&&r.onError(t),e.pending=!1,e.failed=!0,!0===r.continueOnError&&r.mode===Wt.MODE.AUTO&&e.dequeue()})(this,e))),this.queue.size>0&&this.options.mode===Wt.MODE.AUTO&&this.dequeue()}flush(){this.queue.flush()}addFacadeFactory(e){this.facadeFactory=e,this.queue.size>0&&this.options.mode===Wt.MODE.AUTO&&this.dequeue()}removeFacadeFactory(){this.facadeFactory=void 0,this.facades.clear()}dequeue(){if(!0===this.pending)setTimeout((()=>this.dequeue()),10);else{if(this.queue.size>0&&(!1===this.failed||!0===this.options.continueOnError)&&this.facadeFactory&&"function"==typeof this.facadeFactory){const e=this.queue.dequeue();Zt(this,e)}}}enqueue(...e){1===e.length&&"string"!=typeof e[0]?this.queue.enqueue(e[0]):this.queue.enqueue(e),this.options.mode===Wt.MODE.AUTO&&this.dequeue()}push(...e){this.enqueue(...e)}}Wt.MODE=Object.defineProperties({},{AUTO:{value:1,enumerable:!0},MANUAL:{value:2,enumerable:!0}});var Kt={};({get exports(){return Kt},set exports(e){Kt=e}}).exports=xt;var er=c(Kt);var tr=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function rr(e,t,r,n,a){return new Jt(e,t,r,n,a)}const nr=(e,t)=>{const r=er(e),n=[];for(let e=0,a=t.length;e<a;e+=1){const a=t[e],i=r.find((([e])=>e===a.name||e===a.abbreviation));let s;i&&(s=i[1]),n.push({...a,value:s})}return n};class ar extends Z{constructor(e){super(),this.moduleId=2,this.commands=e,this.parameters=void 0}parse(e,...t){const n=this.commands.find((t=>t.name===e||t.abbreviation===e));return n?(this.command=n,this.parameters=((e,t)=>{let n=[];const{parameters:a}=e;for(let o=0,c=a.length;o<c;o+=1){let c=a[o],u=t[o];if(r(u)&&e.options&&!0===e.options.allowJSON&&(u=JSON.parse(u)),"function"===tr(c)){const e=a[o](t);c=e&&1===e.length?e[0]:e}c&&(n="object"===tr(u)?n.concat(nr(u,c)):n.concat((i=u,s=c,[{...s,value:i}])))}var i,s;return n})(n,t),this.emit(ar.EVENTS.PARSING_SUCCEEDED,{command:n,parameters:this.parameters})):this.emit(ar.EVENTS.PARSING_FAILED,rr(Jt.TYPES.ERROR,1,this.moduleId,1,1)),this}reset(){return this.command=void 0,this.parameters=void 0,this.emit(ar.EVENTS.PARSING_RESET,rr(Jt.TYPES.INFO,1,this.moduleId,2,1)),this}}ar.EVENTS={PARSING_FAILED:"PARSING_FAILED",PARSING_SUCCEEDED:"PARSING_SUCCEEDED",PARSING_RESET:"PARSING_RESET"};var ir=ar;const sr={VALIDATION_ASSERTED:"VALIDATION_ASSERTED",VALIDATION_ABORTED:"VALIDATION_ABORTED",VALIDATION_FAILED:"VALIDATION_FAILED",VALIDATION_SUCCEEDED:"VALIDATION_SUCCEEDED",VALIDATION_RESET:"VALIDATION_RESET",VALIDATION_VALUE_MODIFIED:"VALIDATION_VALUE_MODIFIED"},or=e=>["requiredIf"].includes(e),cr=(e,t)=>{const{rules:r,value:n}=e,a=[];for(let i=0,s=r.length;i<s;i+=1){const{name:s,assert:o}=r[i];if(or(s)){const r=t.find((t=>t.name===e.sibling));a.push({name:s,assertion:o(n,r.value)})}else a.push({name:s,assertion:o(n)})}return a},ur=(e,t,r)=>{let n=!1;e.parameters[t].assertions=[];for(let a=0,i=r.length;a<i;a+=1){const{assertion:i,name:s}=r[a];if(e.parameters[t].assertions.push(i),n=i instanceof Jt&&i.type===Jt.TYPES.FATAL,!0===n)return{abort:n,assertion:i};if("array"===tr(i)){const[r,n,a]=i;e.parameters[t].value=r,e.emit(sr.VALIDATION_VALUE_MODIFIED,{rule:s,modified:r,origin:n},a)}e.emit(sr.VALIDATION_ASSERTED,s,rr(Jt.TYPES.INFO,1,e.moduleId,2,3))}return{abort:n}};class lr extends ir{constructor(e){super(e),this.moduleId=3,this.valid=!1,this.lastAssertion=void 0}validate(){return this.command&&this.parameters&&this.parameters.length>0?(this.valid=(e=>{for(let t=0,r=e.parameters.length;t<r;t+=1){const r=cr(e.parameters[t],e.parameters),{abort:n,assertion:a}=ur(e,t,r);if(e.lastAssertion=a,n)return e.emit(sr.VALIDATION_ABORTED,a),!1}return!0})(this),!0===this.valid?this.emit(lr.EVENTS.VALIDATION_SUCCEEDED,{command:this.command,parameters:this.parameters}):this.emit(lr.EVENTS.VALIDATION_FAILED,rr(Jt.TYPES.FATAL,1,this.moduleId,2,2))):this.emit(lr.EVENTS.VALIDATION_FAILED,rr(Jt.TYPES.ERROR,1,this.moduleId,2,1)),this}reset(){return this.valid=!1,super.reset(),this}}lr.EVENTS={...ir.EVENTS,...sr};var dr=lr;class hr extends dr{constructor(e){super(e),this.moduleId=5,this.data=void 0}serialize(e=!1){return this.command&&this.parameters&&this.parameters.length>0&&(this.data=((e,t)=>{const r={};for(let n=0,a=e.length;n<a;n+=1)r[t?e[n].abbreviation:e[n].name]=e[n].value;return r})(this.parameters,e),this.emit(hr.EVENTS.SERIALIZATION_SUCCEEDED,{command:this.command.name,parameters:this.data})),this}result(){return{command:this.command.name,parameters:this.data}}reset(){return this.data=void 0,super.reset()}}hr.EVENTS={...dr.EVENTS,SERIALIZATION_SUCCEEDED:"SERIALIZATION_SUCCEEDED"};var fr=hr,mr=ge(Object,"create"),Er=mr;var pr=function(){this.__data__=Er?Er(null):{},this.size=0};var vr=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_r=mr,Or="__lodash_hash_undefined__",gr=Object.prototype.hasOwnProperty;var yr=function(e){var t=this.__data__;if(_r){var r=t[e];return r===Or?void 0:r}return gr.call(t,e)?t[e]:void 0},Sr=mr,br=Object.prototype.hasOwnProperty;var Ir=function(e){var t=this.__data__;return Sr?void 0!==t[e]:br.call(t,e)},Tr=mr,Ar="__lodash_hash_undefined__";var Nr=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Tr&&void 0===t?Ar:t,this},Rr=pr,Dr=vr,wr=yr,Cr=Ir,Lr=Nr;function Mr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Mr.prototype.clear=Rr,Mr.prototype.delete=Dr,Mr.prototype.get=wr,Mr.prototype.has=Cr,Mr.prototype.set=Lr;var jr=Mr;var Pr=function(){this.__data__=[],this.size=0},Ur=u;var Vr=function(e,t){for(var r=e.length;r--;)if(Ur(e[r][0],t))return r;return-1},Fr=Vr,Gr=Array.prototype.splice;var xr=function(e){var t=this.__data__,r=Fr(t,e);return!(r<0)&&(r==t.length-1?t.pop():Gr.call(t,r,1),--this.size,!0)},qr=Vr;var kr=function(e){var t=this.__data__,r=qr(t,e);return r<0?void 0:t[r][1]},Br=Vr;var $r=function(e){return Br(this.__data__,e)>-1},zr=Vr;var Yr=function(e,t){var r=this.__data__,n=zr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Hr=Pr,Qr=xr,Jr=kr,Xr=$r,Zr=Yr;function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Wr.prototype.clear=Hr,Wr.prototype.delete=Qr,Wr.prototype.get=Jr,Wr.prototype.has=Xr,Wr.prototype.set=Zr;var Kr=jr,en=Wr,tn=Se;var rn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},nn=rn;var an=function(e,t){var r=e.__data__;return nn(t)?r["string"==typeof t?"string":"hash"]:r.map},sn=an;var on=function(e){var t=sn(this,e).delete(e);return this.size-=t?1:0,t},cn=an;var un=function(e){return cn(this,e).get(e)},ln=an;var dn=function(e){return ln(this,e).has(e)},hn=an;var fn=function(e,t){var r=hn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},mn=function(){this.size=0,this.__data__={hash:new Kr,map:new(tn||en),string:new Kr}},En=on,pn=un,vn=dn,_n=fn;function On(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}On.prototype.clear=mn,On.prototype.delete=En,On.prototype.get=pn,On.prototype.has=vn,On.prototype.set=_n;var gn="__lodash_hash_undefined__";var yn=On,Sn=function(e){return this.__data__.set(e,gn),this},bn=function(e){return this.__data__.has(e)};function In(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new yn;++t<r;)this.add(e[t])}In.prototype.add=In.prototype.push=Sn,In.prototype.has=bn;var Tn=function(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1};var An=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1},Nn=Tn,Rn=function(e){return e!=e},Dn=An;var wn=function(e,t,r){return t==t?Dn(e,t,r):Nn(e,Rn,r)};var Cn=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1};var Ln=function(e,t){return e.has(t)},Mn=In,jn=function(e,t){return!!(null==e?0:e.length)&&wn(e,t,0)>-1},Pn=Cn,Un=W,Vn=mt,Fn=Ln,Gn=Math.min;var xn=function(e,t,r){for(var n=r?Pn:jn,a=e[0].length,i=e.length,s=i,o=Array(i),c=1/0,u=[];s--;){var l=e[s];s&&t&&(l=Un(l,Vn(t))),c=Gn(l.length,c),o[s]=!r&&(t||a>=120&&l.length>=120)?new Mn(s&&l):void 0}l=e[0];var d=-1,h=o[0];e:for(;++d<a&&u.length<c;){var f=l[d],m=t?t(f):f;if(f=r||0!==f?f:0,!(h?Fn(h,m):n(u,m,r))){for(s=i;--s;){var E=o[s];if(!(E?Fn(E,m):n(e[s],m,r)))continue e}h&&h.push(m),u.push(f)}}return u};var qn=function(e){return e};var kn=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Bn=kn,$n=Math.max;var zn=function(e,t,r){return t=$n(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=$n(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(s),Bn(e,this,o)}};var Yn=function(e){return function(){return e}},Hn=ge,Qn=function(){try{var e=Hn(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Jn=Yn,Xn=Qn,Zn=Xn?function(e,t){return Xn(e,"toString",{configurable:!0,enumerable:!1,value:Jn(t),writable:!0})}:qn,Wn=Zn,Kn=800,ea=16,ta=Date.now;var ra=function(e){var t=0,r=0;return function(){var n=ta(),a=ea-(n-r);if(r=n,a>0){if(++t>=Kn)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},na=ra(Wn),aa=qn,ia=zn,sa=na;var oa=function(e,t){return sa(ia(e,t,aa),e+"")},ca=x,ua=$;var la=function(e){return ua(e)&&ca(e)};var da=W,ha=xn,fa=function(e){return la(e)?e:[]},ma=oa((function(e){var t=da(e,fa);return t.length&&t[0]===e[0]?ha(t):[]}));var Ea=e=>"array"===tr(e)?!!e.length:null!=e&&!Number.isNaN(e)&&(!1===e||(e instanceof Date?!Number.isNaN(e.getTime()):"object"===tr(e)?!!Object.keys(e).length:!!String(e).length));var pa=e=>t=>!Ea(t)||null!==t.toString().match(e);var va=(e,t)=>r=>!Ea(r)||(!/\s/.test(r)||r instanceof Date)&&e<=+r&&t>=+r;var _a=e=>"array"===tr(e)?e.length:"object"===tr(e)?Object.keys(e).length:String(e).length;var Oa=e=>t=>!Ea(t)||_a(t)<=e;var ga=e=>t=>!Ea(t)||_a(t)>=e;var ya=pa(/^\d*(\.\d+)?$/);var Sa=e=>t=>!Ea(t)||e.indexOf(t)>-1;var ba=e=>t=>!Ea(t)||tr(t)===e;function Ia(e,t){return(...r)=>e(...r)||t()}class Ta extends Z{constructor(e,t,r={maxExecutionBeforeStop:3,fillParameters:!1}){super(),this.moduleId=4,this.history=new Map,this.stats={},this.data={},this.commandQueue=e,this.commandSerializer=new fr(t),this.options=r}process(e,...t){try{let r;const n=this.commandSerializer.commands.find((t=>t.name===e||t.abbreviation===e));if(n){const{abbreviation:a,name:i}=n;if(void 0===this.stats[a]&&(this.stats[a]=0),this.options.fillParameters&&!1===Ea(t)&&this.data[a])return r={command:i,parameters:this.data[a]},this.emit(Ta.EVENTS.PROCESSING_SUCCEEDED,r),r;const{valid:s,stop:o}=((e,t,r,n)=>{let a=!0,i=!1;if(e.dependencies&&e.dependencies.length>0){const s=Array.from(t.keys());a=ma(s,e.dependencies).length===e.dependencies.length,i=r[e.abbreviation]>n}return{stop:i,valid:a}})(n,this.history,this.stats,this.options.maxExecutionBeforeStop);if(!0===s&&!1===o)if(this.commandSerializer.reset().parse(e,...t).validate(),this.commandSerializer.valid){r=this.commandSerializer.serialize().result();const e="function"==typeof n.id?n.id(r.parameters):n.id;this.history.set(e,{parameters:t,createdAt:Date.now()}),this.stats[a]=0,this.data[a]=r.parameters,this.emit(Ta.EVENTS.PROCESSING_SUCCEEDED,r)}else this.stats[a]+=1,this.emit(Ta.EVENTS.PROCESSING_FAILED,this.commandSerializer.lastAssertion);else!1===s&&!1===o?(this.stats[a]+=this.stats[a]+1,this.commandQueue.enqueue(e,...t),this.emit(Ta.EVENTS.PROCESSING_REQUEUED,new Jt(Jt.TYPES.WARNING,1,this.moduleId,1,1))):this.emit(Ta.EVENTS.PROCESSING_FAILED,new Jt(Jt.TYPES.FATAL,1,this.moduleId,1,2))}return r}catch(e){const t=new Jt(Jt.TYPES.FATAL,1,this.moduleId,1,3,e.message);return void this.emit(Ta.EVENTS.PROCESSING_FAILED,t)}}getCommandParameters(e){const t=this.commandSerializer.commands.find((t=>t.name===e||t.abbreviation===e));if(t)return this.data[t.abbreviation]}reset(){this.commandSerializer.reset(),this.stats={},this.history=new Map,this.data={}}}Ta.EVENTS={PROCESSING_SUCCEEDED:"PROCESSING_SUCCEEDED",PROCESSING_FAILED:"PROCESSING_FAILED",PROCESSING_REQUEUED:"PROCESSING_REQUEUED"};var Aa=Ta;var Na=e=>({name:"appSite",abbreviation:"as",sibling:"hybrid",rules:e});var Ra=e=>({name:"code",abbreviation:"cp",rules:e});var Da=e=>({name:"comment",abbreviation:"co",rules:e});var wa=e=>({name:"consentString",abbreviation:"ct",rules:e});var Ca=e=>({name:"country",abbreviation:"cn",rules:e});var La=e=>({name:"debug",abbreviation:"dg",rules:e});var Ma=e=>({name:"distributionChannel",abbreviation:"dc",rules:e});var ja=e=>({name:"domainServiceName",abbreviation:"dn",rules:e});var Pa=e=>({name:"event",abbreviation:"ev",rules:e});var Ua=e=>({name:"hybrid",abbreviation:"hy",rules:e});var Va=e=>({name:"hybridToken",abbreviation:"ht",rules:e});var Fa=e=>({name:"mediaTypes",abbreviation:"mt",rules:e});var Ga=e=>({name:"methods",abbreviation:"mh",rules:e});var xa=e=>({name:"mode",abbreviation:"mo",rules:e});var qa=e=>({name:"multiIdentifier",abbreviation:"mi",rules:e});var ka=e=>({name:"panelIdentifier",abbreviation:"pid",rules:e,sibling:"panelVendorId"});var Ba=e=>({name:"panelVendorId",abbreviation:"pvd",rules:e,sibling:"panelIdentifier"});var $a=e=>({name:"pixelType",abbreviation:"pt",rules:e});var za=e=>({name:"site",abbreviation:"st",rules:e});var Ya=e=>({name:"surveyType",abbreviation:"sv",rules:e});var Ha=e=>({name:"tenant",abbreviation:"ta",rules:e});var Qa=e=>({name:"thirdPartyModule",abbreviation:"3p",rules:e});var Ja=(e,t,r)=>n=>e(n)||[t,n,rr(2,...r)];var Xa=(e,t)=>({name:e,assert:t});var Za=pa(/^[a-zA-Z0-9_]*$/);var Wa=[Xa("required",Ja(Ea,void 0,[1,1,5,1])),Xa("typeOf",Ia(ba("string"),(()=>rr(4,1,1,5,2)))),Xa("siteIdentifier",Ia(Za,(()=>rr(4,1,1,5,3)))),Xa("min",Ia(ga(3),(()=>rr(4,1,1,5,4)))),Xa("max",Ia(Oa(15),(()=>rr(4,1,1,5,5))))];function Ka(e,t){return r=>Ea(r)||[e,r,rr(2,...t)]}var ei=(e,t,r)=>n=>"string"!==tr(n)||!Ea(n)||[n.replace(e,t),n,rr(2,...r)];var ti=(e,t)=>r=>{if(Ea(r)&&!1===Oa(e)(r)){let n;return n="number"===tr(r)?((e,t)=>{let r=e.toString();return r=r.slice(0,t),parseInt(r,10)})(r,e):"array"===tr(r)||"string"===tr(r)?r.slice(0,e):"object"===tr(r)?((e,t)=>{const r=Object.keys(e),n={};for(let a=0,i=t;a<i;a+=1)n[r[a]]=e[r[a]];return n})(r,e):r,[n,r,rr(2,...t)]}return!0};const ri="Leercode_nichtzuordnungsfaehig",ni=["qds","dcf","nid"];var ai=[Xa("required",Ja(Ea,ri,[1,1,6,1])),Xa("typeOf",Ja(ba("string"),ri,[1,1,6,2])),Xa("sanitize",ei(/[^a-zA-Z0-9,_/\-?#]/g,".",[1,1,6,3])),Xa("truncate",ti(256,[1,1,6,4]))];var ii=[Xa("defaultValue",Ka(void 0,[1,1,7,1])),Xa("typeOf",Ja(ba("string"),void 0,[1,1,7,2])),Xa("ascii",ei(/[^\x20-\x7E]/g,".",[1,1,7,3])),Xa("truncate",ti(256,[1,1,7,4]))];var si=e=>pa(new RegExp(`^([0-9a-fA-F]{2})([0-9a-fA-F]{${4*e}})$`,"g"));var oi=(e=!0)=>{const t=[Xa("required",Ia(Ea,(()=>rr(4,1,1,8,1)))),Xa("typeOf",Ia(ba("string"),(()=>rr(4,1,1,8,2)))),Xa("consentString",Ia(si(2),(()=>rr(4,1,1,8,3))))];return!1===e&&t.splice(0,1),t};var ci=Sa(["de","at"]);var ui=[Xa("defaultValue",Ka("de",[1,1,9,1])),Xa("typeOf",Ja(ba("string"),"de",[1,1,9,2])),Xa("enum",Ja(ci,"de",[1,1,9,3]))];var li=[Xa("defaultValue",Ka(!1,[1,1,10,1])),Xa("typeOf",Ia(ba("boolean"),(()=>rr(4,1,1,10,2))))];var di=Sa(["web","hyb","ctv"]);var hi=[Xa("defaultValue",Ka("web",[1,1,1,11,1])),Xa("typeOf",Ja(ba("string"),"web",[1,1,11,2])),Xa("enum",Ja(di,"web",[1,1,11,3]))];var fi=[Xa("required",Ia(Ea,(()=>rr(4,1,1,12,1)))),Xa("typeof",Ia(ba("string"),(()=>rr(4,1,1,12,2)))),Xa("regex",Ia(pa(/^(data-)([a-f0-9]{10})\.([a-zA-Z0-9][a-zA-Z0-9-_]{1,63})(?:\.([a-z]{2,63}))?\.([a-z]{2,63})$/g),(()=>rr(4,1,1,12,3))))];var mi=Sa(["inst","init","open","clse","play","resm","stop","fowa","bakw","recd","paus","forg","bakg","dele","refr","kill","view","alve","fini","mute","aforg","abakg","aclse","sple","scvl","serr","spyr","smdr","sfpl","sfqt","ssqt","stqt","soqt","sofc","scfc","scqt","splr","spli","sprs","spre","smrs","smre","sors","sore","sack","sapl","sapa","snsp"]);var Ei=[Xa("required",Ia(Ea,(()=>rr(4,1,1,13,1)))),Xa("typeof",Ia(ba("string"),(()=>rr(4,1,1,13,2)))),Xa("eventEnum",Ia(mi,(()=>rr(4,1,1,13,3))))];var pi=[Xa("defaultValue",Ka(!0,[1,1,14,1])),Xa("typeOf",Ia(ba("boolean"),(()=>rr(4,1,1,14,2))))];var vi=[Xa("required",Ia(Ea,(()=>rr(4,1,1,24,1)))),Xa("typeOf",Ia(ba("string"),(()=>rr(4,1,1,24,2))))];var _i=Sa(["debug","hybrid"]);var Oi=[Xa("required",Ia(Ea,(()=>rr(4,1,1,19,1)))),Xa("typeof",Ia(ba("string"),(()=>rr(4,1,1,19,2)))),Xa("enum",Ia(_i,(()=>rr(4,1,1,19,3))))];var gi=[Xa("required",Ia(Ea,(()=>rr(4,1,1,28,1)))),Xa("typeof",Ia(ba("string"),(()=>rr(4,1,1,28,2))))];const yi=(e,t)=>!e||Ea(t);var Si=e=>(t,r)=>{if("function"!==tr(e))return yi(t,r);const n=e(t);return yi(n,r)};var bi=[Xa("requiredIf",Ia(Si(),(()=>rr(4,1,1,29,1)))),Xa("typeOf",Ja(ba("string"),void 0,[1,1,29,2]))];var Ii=[Xa("requiredIf",Ia(Si(),(()=>rr(4,1,1,30,1)))),Xa("typeOf",Ja(ba("number"),0,[2,1,30,2]))];var Ti=Sa(["cp","sp","xp"]);var Ai=[Xa("defaultValue",Ka("cp",[1,1,20,1])),Xa("typeOf",Ja(ba("string"),"cp",[1,1,20,2])),Xa("enum",Ja(Ti,"cp",[1,1,20,3]))];var Ni=[Xa("required",Ia(Ea,(()=>rr(4,1,1,26,1)))),Xa("typeOf",Ia(ba("string"),(()=>rr(4,1,1,26,2)))),Xa("siteIdentifier",Ia(Za,(()=>rr(4,1,1,26,3)))),Xa("min",Ia(ga(3),(()=>rr(4,1,1,26,4)))),Xa("max",Ia(Oa(15),(()=>rr(4,1,1,26,5))))];var Ri=Sa(["in","mo"]);var Di=[Xa("defaultValue",Ka("in",[1,1,21,1])),Xa("typeOf",Ja(ba("string"),"in",[1,1,21,2])),Xa("enum",Ja(Ri,"in",[1,1,21,3]))];var wi=[Xa("typeOf",Ia(ba(ya),(()=>rr(4,1,1,22,1)))),Xa("between",Ia(va(1,4),(()=>rr(4,1,1,22,1))))];var Ci=Sa(ni);var Li=[Xa("required",Ia(Ea,(()=>rr(4,1,1,23,1)))),Xa("typeof",Ia(ba("string"),(()=>rr(4,1,1,23,2)))),Xa("enum",Ia(Ci,(()=>rr(4,1,1,23,3))))];var Mi=[Xa("defaultValue",Ka(1,[1,1,17,1])),Xa("typeOf",Ja(ba("number"),1,[1,1,17,2])),Xa("max",Ja(va(1,7),1,[1,1,17,3]))];var ji=[Xa("defaultValue",Ka(1,[1,1,18,1])),Xa("typeOf",Ja(ba("number"),1,[1,1,18,2])),Xa("max",Ja(va(1,5),1,[1,1,18,3]))];var Pi={id:1,name:"configure",abbreviation:"cf",parameters:[[Na(Wa),wa(oi(!1)),Ca(ui),La(li),Ma(hi),ja(fi),Ua(pi),Fa(Mi),Ga(ji),ka(bi),Ba(Ii),za(Ni),Ha(wi)]],options:{allowJSON:!0}};var Ui={id:3,name:"event",abbreviation:"ev",dependencies:[1,2],parameters:[Pa(Ei)],options:{allowJSON:!1}};var Vi={id:4,name:"hybrid",abbreviation:"hy",parameters:[[Ca(ui),La(li),ja(fi),za(Ni),Va(vi)]],options:{allowJSON:!0}};var Fi=(e,...t)=>r=>e(r)?t:void 0;var Gi=[Pi,{id:2,name:"pageview",abbreviation:"pv",dependencies:[1],parameters:[[Ra(ai),Da(ii),$a(Ai),Ha(wi)]],options:{allowJSON:!0}},Vi,Ui,{id:5,name:"setMode",abbreviation:"sm",parameters:[xa(Oi)],options:{allowJSON:!1}},{id:6,name:"setMultiIdentifier",abbreviation:"smi",parameters:[qa(gi)],options:{allowJSON:!1}},{id:e=>ni.indexOf(e.thirdPartyModule)+7,name:"thirdPartyModules",abbreviation:"3p",dependencies:[1,2],parameters:[Qa(Li),Fi((e=>"qds"===e[0]),Ya(Di))],options:{allowJSON:!1}}],xi="object"==typeof global&&global&&global.Object===Object&&global,qi="object"==typeof self&&self&&self.Object===Object&&self,ki=xi||qi||Function("return this")(),Bi=ki.Symbol,$i=Object.prototype,zi=$i.hasOwnProperty,Yi=$i.toString,Hi=Bi?Bi.toStringTag:void 0;var Qi=Object.prototype.toString;var Ji="[object Null]",Xi="[object Undefined]",Zi=Bi?Bi.toStringTag:void 0;function Wi(e){return null==e?void 0===e?Xi:Ji:Zi&&Zi in Object(e)?function(e){var t=zi.call(e,Hi),r=e[Hi];try{e[Hi]=void 0;var n=!0}catch(e){}var a=Yi.call(e);return n&&(t?e[Hi]=r:delete e[Hi]),a}(e):function(e){return Qi.call(e)}(e)}function Ki(e){return null!=e&&"object"==typeof e}var es="[object Symbol]";function ts(e){return"symbol"==typeof e||Ki(e)&&Wi(e)==es}function rs(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var ns=Array.isArray,as=1/0,is=Bi?Bi.prototype:void 0,ss=is?is.toString:void 0;function os(e){if("string"==typeof e)return e;if(ns(e))return rs(e,os)+"";if(ts(e))return ss?ss.call(e):"";var t=e+"";return"0"==t&&1/e==-as?"-0":t}var cs=/\s/;var us=/^\s+/;function ls(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&cs.test(e.charAt(t)););return t}(e)+1).replace(us,""):e}function ds(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var hs=NaN,fs=/^[-+]0x[0-9a-f]+$/i,ms=/^0b[01]+$/i,Es=/^0o[0-7]+$/i,ps=parseInt;var vs=1/0,_s=17976931348623157e292;function Os(e){return e?(e=function(e){if("number"==typeof e)return e;if(ts(e))return hs;if(ds(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ds(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=ls(e);var r=ms.test(e);return r||Es.test(e)?ps(e.slice(2),r?2:8):fs.test(e)?hs:+e}(e))===vs||e===-vs?(e<0?-1:1)*_s:e==e?e:0:0===e?e:0}function gs(e){var t=Os(e),r=t%1;return t==t?r?t-r:t:0}function ys(e){return e}var Ss="[object AsyncFunction]",bs="[object Function]",Is="[object GeneratorFunction]",Ts="[object Proxy]";function As(e){if(!ds(e))return!1;var t=Wi(e);return t==bs||t==Is||t==Ss||t==Ts}var Ns=ki["__core-js_shared__"],Rs=function(){var e=/[^.]+$/.exec(Ns&&Ns.keys&&Ns.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var Ds=Function.prototype.toString;var ws=/^\[object .+?Constructor\]$/,Cs=Function.prototype,Ls=Object.prototype,Ms=Cs.toString,js=Ls.hasOwnProperty,Ps=RegExp("^"+Ms.call(js).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Us(e){return!(!ds(e)||(t=e,Rs&&Rs in t))&&(As(e)?Ps:ws).test(function(e){if(null!=e){try{return Ds.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function Vs(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Us(r)?r:void 0}var Fs=800,Gs=16,xs=Date.now;var qs,ks,Bs,$s=function(){try{var e=Vs(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),zs=$s,Ys=zs?function(e,t){return zs(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:ys,Hs=(qs=Ys,ks=0,Bs=0,function(){var e=xs(),t=Gs-(e-Bs);if(Bs=e,t>0){if(++ks>=Fs)return arguments[0]}else ks=0;return qs.apply(void 0,arguments)}),Qs=Hs;function Js(e){return e!=e}function Xs(e,t){return!!(null==e?0:e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):function(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}(e,Js,r)}(e,t,0)>-1}var Zs=Math.max;function Ws(e,t){return Qs(function(e,t,r){return t=Zs(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=Zs(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(e,t,ys),e+"")}var Ks=9007199254740991;function eo(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ks}(e.length)&&!As(e)}var to="[object Arguments]";function ro(e){return Ki(e)&&Wi(e)==to}var no=Object.prototype,ao=no.hasOwnProperty,io=no.propertyIsEnumerable,so=ro(function(){return arguments}())?ro:function(e){return Ki(e)&&ao.call(e,"callee")&&!io.call(e,"callee")},oo=so;function co(e){return function(t){return e(t)}}var uo=Vs(Object,"create");var lo="__lodash_hash_undefined__",ho=Object.prototype.hasOwnProperty;var fo=Object.prototype.hasOwnProperty;var mo="__lodash_hash_undefined__";function Eo(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function po(e,t){for(var r,n,a=e.length;a--;)if((r=e[a][0])===(n=t)||r!=r&&n!=n)return a;return-1}Eo.prototype.clear=function(){this.__data__=uo?uo(null):{},this.size=0},Eo.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Eo.prototype.get=function(e){var t=this.__data__;if(uo){var r=t[e];return r===lo?void 0:r}return ho.call(t,e)?t[e]:void 0},Eo.prototype.has=function(e){var t=this.__data__;return uo?void 0!==t[e]:fo.call(t,e)},Eo.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=uo&&void 0===t?mo:t,this};var vo=Array.prototype.splice;function _o(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}_o.prototype.clear=function(){this.__data__=[],this.size=0},_o.prototype.delete=function(e){var t=this.__data__,r=po(t,e);return!(r<0)&&(r==t.length-1?t.pop():vo.call(t,r,1),--this.size,!0)},_o.prototype.get=function(e){var t=this.__data__,r=po(t,e);return r<0?void 0:t[r][1]},_o.prototype.has=function(e){return po(this.__data__,e)>-1},_o.prototype.set=function(e,t){var r=this.__data__,n=po(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Oo=Vs(ki,"Map");function go(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function yo(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function So(e){return null==e?"":os(e)}function bo(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}yo.prototype.clear=function(){this.size=0,this.__data__={hash:new Eo,map:new(Oo||_o),string:new Eo}},yo.prototype.delete=function(e){var t=go(this,e).delete(e);return this.size-=t?1:0,t},yo.prototype.get=function(e){return go(this,e).get(e)},yo.prototype.has=function(e){return go(this,e).has(e)},yo.prototype.set=function(e,t){var r=go(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var Io=Bi?Bi.isConcatSpreadable:void 0;function To(e){return ns(e)||oo(e)||!!(Io&&e&&e[Io])}function Ao(e,t,r,n,a){var i=-1,s=e.length;for(r||(r=To),a||(a=[]);++i<s;){var o=e[i];t>0&&r(o)?t>1?Ao(o,t-1,r,n,a):bo(a,o):n||(a[a.length]=o)}return a}function No(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}(e,t,r)}var Ro=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Do(e){return Ro.test(e)}var wo="\\ud800-\\udfff",Co="["+wo+"]",Lo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Mo="\\ud83c[\\udffb-\\udfff]",jo="[^"+wo+"]",Po="(?:\\ud83c[\\udde6-\\uddff]){2}",Uo="[\\ud800-\\udbff][\\udc00-\\udfff]",Vo="(?:"+Lo+"|"+Mo+")"+"?",Fo="[\\ufe0e\\ufe0f]?",Go=Fo+Vo+("(?:\\u200d(?:"+[jo,Po,Uo].join("|")+")"+Fo+Vo+")*"),xo="(?:"+[jo+Lo+"?",Lo,Po,Uo,Co].join("|")+")",qo=RegExp(Mo+"(?="+Mo+")|"+xo+Go,"g");function ko(e){return Do(e)?function(e){return e.match(qo)||[]}(e):function(e){return e.split("")}(e)}var Bo=Vs(ki,"Set"),$o="__lodash_hash_undefined__";function zo(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new yo;++t<r;)this.add(e[t])}function Yo(e,t){return e.has(t)}function Ho(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function Qo(e){return Ki(e)&&eo(e)}function Jo(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}zo.prototype.add=zo.prototype.push=function(e){return this.__data__.set(e,$o),this},zo.prototype.has=function(e){return this.__data__.has(e)};var Xo=Math.min;function Zo(e){return Qo(e)?e:[]}var Wo=Ws((function(e){var t=rs(e,Zo);return t.length&&t[0]===e[0]?function(e,t,r){for(var n=r?Jo:Xs,a=e[0].length,i=e.length,s=i,o=Array(i),c=1/0,u=[];s--;){var l=e[s];s&&t&&(l=rs(l,co(t))),c=Xo(l.length,c),o[s]=!r&&(t||a>=120&&l.length>=120)?new zo(s&&l):void 0}l=e[0];var d=-1,h=o[0];e:for(;++d<a&&u.length<c;){var f=l[d],m=t?t(f):f;if(f=r||0!==f?f:0,!(h?Yo(h,m):n(u,m,r))){for(s=i;--s;){var E=o[s];if(!(E?Yo(E,m):n(e[s],m,r)))continue e}h&&h.push(m),u.push(f)}}return u}(t):[]})),Ko=Wo,ec=9007199254740991,tc=Math.floor;function rc(e,t){var r="";if(!e||t<1||t>ec)return r;do{t%2&&(r+=e),(t=tc(t/2))&&(e+=e)}while(t);return r}var nc,ac=(nc="length",function(e){return null==e?void 0:e[nc]}),ic="\\ud800-\\udfff",sc="["+ic+"]",oc="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",cc="\\ud83c[\\udffb-\\udfff]",uc="[^"+ic+"]",lc="(?:\\ud83c[\\udde6-\\uddff]){2}",dc="[\\ud800-\\udbff][\\udc00-\\udfff]",hc="(?:"+oc+"|"+cc+")"+"?",fc="[\\ufe0e\\ufe0f]?",mc=fc+hc+("(?:\\u200d(?:"+[uc,lc,dc].join("|")+")"+fc+hc+")*"),Ec="(?:"+[uc+oc+"?",oc,lc,dc,sc].join("|")+")",pc=RegExp(cc+"(?="+cc+")|"+Ec+mc,"g");function vc(e){return Do(e)?function(e){for(var t=pc.lastIndex=0;pc.test(e);)++t;return t}(e):ac(e)}var _c=Math.ceil;function Oc(e,t){var r=(t=void 0===t?" ":os(t)).length;if(r<2)return r?rc(t,e):t;var n=rc(t,_c(e/vc(t)));return Do(t)?No(ko(n),0,e).join(""):n.slice(0,e)}function gc(e,t,r){e=So(e);var n=(t=gs(t))?vc(e):0;return t&&n<t?Oc(t-n,r)+e:e}var yc=Bo&&1/Ho(new Bo([,-0]))[1]==1/0?function(e){return new Bo(e)}:function(){},Sc=yc,bc=200;var Ic=Ws((function(e){return function(e,t,r){var n=-1,a=Xs,i=e.length,s=!0,o=[],c=o;if(r)s=!1,a=Jo;else if(i>=bc){var u=t?null:Sc(e);if(u)return Ho(u);s=!1,a=Yo,c=new zo}else c=t?[]:o;e:for(;++n<i;){var l=e[n],d=t?t(l):l;if(l=r||0!==l?l:0,s&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),o.push(l)}else a(c,d,r)||(c!==o&&c.push(d),o.push(l))}return o}(Ao(e,1,Qo,!0))})),Tc=Ic;const Ac=e=>e.core?Tc(Object.keys(e.core.purpose.consents).filter((t=>!0===e.core.purpose.consents[t])).map((e=>+e)),Object.keys(e.core.purpose.legitimateInterests).filter((t=>!0===e.core.purpose.legitimateInterests[t])).map((e=>+e))).concat(Object.keys(e.core.specialFeatureOptins).filter((t=>!0===e.core.specialFeatureOptins[t])).map((e=>+e+10))):Tc(Object.keys(e.purpose.consents).filter((t=>!0===e.purpose.consents[t])).map((e=>+e)),Object.keys(e.purpose.legitimateInterests).filter((t=>!0===e.purpose.legitimateInterests[t])).map((e=>+e))).concat(Object.keys(e.specialFeatureOptins).filter((t=>!0===e.specialFeatureOptins[t])).map((e=>+e+10)));var Nc=(e,t)=>{const r=((e,t)=>e.core?Ko(Tc(Object.keys(e.core.vendorConsents).filter((t=>!0===e.core.vendorConsents[t])).map((e=>+e)),Object.keys(e.core.vendorLegitimateInterests).filter((t=>!0===e.core.vendorLegitimateInterests[t])).map((e=>+e))),t):Ko(Tc(Object.keys(e.vendor.consents).filter((t=>!0===e.vendor.consents[t])).map((e=>+e)),Object.keys(e.vendor.legitimateInterests).filter((t=>!0===e.vendor.legitimateInterests[t])).map((e=>+e))),t))(e,t),n=[];for(let a=0,i=t.length;a<i;a+=1){let i=[];const s=t[a];r.includes(s)&&(i=Ac(e)),n.push(i)}return n};const Rc=e=>e.map((e=>2**(e-1))).reduce(((e,t)=>e+t),0);class Dc{constructor(e,t,r){Object.defineProperties(this,{type:{value:e,writable:!1,enumerable:!0,configurable:!1},value:{value:t,writeable:!1,enumerable:!0,configurable:!1},vendors:{value:r,writeable:!1,enumerable:!0,configurable:!1}})}check(e,t){const r=this.vendors.indexOf(e),n=Array.isArray(t)?t:[t];if(r>-1){let e=Rc(n);if(r<this.vendors.length-1){let t=e.toString(16);t=function(e,t,r){e=So(e);var n=(t=gs(t))?vc(e):0;return t&&n<t?e+Oc(t-n,r):e}(t,4*(this.vendors.length-r)-(4-t.length),"0"),e=parseInt(t,16)}return(this.value&e)===e}return!1}toString(e=16){return 2===e?`${gc(this.type.toString(2),8,"0")}${gc(this.value.toString(2),16*this.vendors.length,"0")}`:`${gc(this.type.toString(e),2,"0")}${gc(this.value.toString(e),4*this.vendors.length,"0")}`}static create(e,t,r=Dc.TYPES.TCF2X){let n="";for(let r=0,a=e.length;r<a;r+=1){n+=gc(Rc(t[r]).toString(16),4,"0")}return n=parseInt(n,16),new Dc(r,n,e)}}Dc.TYPES=Object.defineProperties({},{NONE:{value:0,writeable:!1,enumerable:!0,configurable:!1},TCF2X:{value:1,writeable:!1,enumerable:!0,configurable:!1},CUSTOM:{value:255,writeable:!1,enumerable:!0,configurable:!1}});var wc=Dc;class Cc extends Z{constructor(e){super(),this.vendors=e,this.ioConsentString=void 0}convert(e){try{if(e){const t=Nc(e,this.vendors);return this.ioConsentString=wc.create(this.vendors,t),this.emit(Cc.EVENTS.TCF_CONVERT_SUCCESS,{ioConsentString:this.ioConsentString}),this.ioConsentString}throw new Jt(Jt.TYPES.ERROR,3,3,2,1)}catch(e){const t=new Jt(Jt.TYPES.ERROR,3,3,2,2,e instanceof Jt?e:e.message);return void this.emit(Cc.EVENTS.TCF_CONVERT_FAILED,t)}}}var Lc=Cc;Cc.EVENTS={TCF_CONVERT_SUCCESS:"TCF_CONVERT_SUCCESS",TCF_CONVERT_FAILED:"TCF_CONVERT_FAILED"};const Mc=e=>{const{category:t,validated:r}=e;if(!r){if(!t||!Object.values(jc.CATEGORIES).includes(t))throw new Jt(4,1,3,1,1);e.validated=!0}};class jc extends Z{constructor(){super(),this.moduleId=3,this.data=void 0}setItem(e,t,r){try{Mc(r);const{category:n}=r;void 0===this.data&&(this.data={global:{},measurement:{},sensor:{},feature:{},plugins:{},thirdPartyPlugins:{},tcf:{},bundleLoaded:{},version:{}}),this.data[n][e]=t,this.emit(jc.generateDataMutationEventName(jc.MUTATION_EVENTS.SET,n,e),{key:e,value:t,category:n})}catch(e){throw new Jt(4,1,this.moduleId,2,1,e instanceof Jt?e:e.message)}}setItems(e,t,r){Mc(r);for(let n=0,a=e.length;n<a;n+=1)this.setItem(e[n],t[n],r)}deleteItem(e,t){try{if(Mc(t),this.data){const{category:r}=t;delete this.data[r][e],this.emit(jc.generateDataMutationEventName(jc.MUTATION_EVENTS.DELETE,r,e),{key:e,category:r})}}catch(e){throw new Jt(4,1,this.moduleId,4,1,e.message)}}deleteItems(e,t){Mc(t);for(let r=0,n=e.length;r<n;r+=1)this.deleteItem(e[r],t)}getItem(e,t){try{Mc(t);const{category:r}=t,n={key:e,category:r,value:void 0};return this.data&&this.data[r]&&void 0!==this.data[r][e]&&(n.value=this.data[r][e]),n}catch(e){throw new Jt(4,1,this.moduleId,6,1,e.message)}}getItems(e,t){Mc(t);const r=[];for(let n=0,a=e.length;n<a;n+=1)r.push(this.getItem(e[n],t));return r}static generateDataMutationEventName(e,t,r){return`data.mutation.${`${e}.${t}.${r}`.toLowerCase()}`}}jc.CATEGORIES={GLOBAL:"global",MEASUREMENT:"measurement",SENSOR:"sensor",FEATURE:"feature",PLUGINS:"plugins",THIRD_PARTY_PLUGINS:"thirdPartyPlugins",TCF:"tcf",BUNDLE_LOADED:"bundleLoaded",VERSION:"version"},jc.MUTATION_EVENTS={SET:"SET",DELETE:"DELETE"};const Pc=(e,t)=>{if(t.tcf){const{value:r}=e.manager.dataLayer.getItem("consentString",{category:"tcf"});r instanceof wc&&t.queue.queue.items.forEach(((e,n)=>{"configure"===e[0]&&(e[1].consentString=r.toString(16),t.queue.queue.items[n]=e)}))}},Uc=(e,t,r)=>{if(t.tcf){const{value:t}=e.manager.dataLayer.getItem("consentString",{category:"tcf"});t instanceof wc&&(r.consentString=t.toString(16))}return r},Vc=(e,r,n)=>"object"===t(r)?Object.keys(r).reduce(((t,a)=>(n.parameterBlacklist&&n.parameterBlacklist[e]&&n.parameterBlacklist[e].includes(a)||(t[a]=r[a]),t)),{}):r;class Fc extends Z{constructor(e,t){super(),this.moduleId=2,this.manager=e,this.defaultModules=t.map((e=>e.name)),this.modules=new Map(t.map((e=>[e.name,{...e,queue:new Wt(void 0,{mode:Wt.MODE.MANUAL}),active:!1,tcf:!!e.tcf}]))),this.manager.dataLayer.on(jc.generateDataMutationEventName(jc.MUTATION_EVENTS.SET,jc.CATEGORIES.TCF,"consentString"),(()=>{this.handleConsentChanged()}))}addModule(e,t){if(this.modules.has(e)){const e=new Jt(3,1,this.moduleId,3,1);this.emit(Fc.EVENTS.ADD_MODULE,e)}else this.modules.set(e,{...t,queue:new Wt(void 0,{mode:Wt.MODE.MANUAL}),active:!1})}addFacade(e,t){const r=this.modules.get(e);r.queue.addFacadeFactory(t),this.modules.set(e,r)}removeFacade(e){const t=this.modules.get(e);t.queue.removeFacadeFactory(),this.modules.set(e,t)}activate(e){const t=this.modules.get(e);Pc(this,t),t.active=!0,t.queue.options.mode=Wt.MODE.AUTO,t.queue.dequeue(),this.modules.set(e,t)}deactivate(e){const t=this.modules.get(e);t.active=!1,t.queue.options.mode=Wt.MODE.MANUAL,t.queue.flush(),this.modules.set(e,t)}enqueue(e,t={}){try{this.modules.forEach(((r,n)=>{if(-1===this.defaultModules.indexOf(n))return;let i=a(t);i=Vc(e,t,r),"configure"===e&&(i=Uc(this,r,i)),r.queue.enqueue(e,i)}))}catch(e){const t=new Jt(3,1,this.moduleId,1,1,e);throw this.emit(Fc.EVENTS.ENQUEUE_ERROR,t),t}}enqueueToSingleModule(e,t,r={}){try{const n=this.modules.get(e);if(n){let e=a(r);e=Vc(t,r,n),"configure"===t&&(e=Uc(this,n,e)),n.queue.enqueue(t,e)}}catch(e){const t=new Jt(3,1,this.moduleId,4,1,e);throw this.emit(Fc.EVENTS.ENQUEUE_ERROR,t),t}}dequeue(){try{this.modules.forEach(((e,t)=>{-1!==this.defaultModules.indexOf(t)&&e.queue.dequeue()}))}catch(e){const t=new Jt(3,1,this.moduleId,2,1,e);throw this.emit(Fc.EVENTS.ENQUEUE_ERROR,t),t}}handleConsentChanged(){try{this.modules.forEach((e=>{Pc(this,e)}))}catch(e){const t=new Jt(Jt.TYPES.ERROR,3,this.moduleId,5,2,e.message);this.emit(Fc.EVENTS.EXECUTION_ERROR,t)}}}Fc.EVENTS={MODULE_NOT_LOADED:"MODULE_NOT_LOADED",QUEUE_CREATION_ERROR:"QUEUE_CREATION_ERROR",QUEUE_DOES_NOT_EXIST:"QUEUE_DOES_NOT_EXIST",ENQUEUE_ERROR:"ENQUEUE_ERROR",DEQUEUE_ERROR:"DEQUEUE_ERROR",ADD_MODULE:"ADD_MODULE",EXECUTION_ERROR:"EXECUTION_ERROR"};const Gc={ALL:1,IOMB_ONLY:2,IOMP_ONLY:3};var xc={sensors:{iomb:{bit:1,cdn:{host:()=>"dsn",path:({ecmaVersion:e,variant:t,version:r})=>`/iomb/${r}/sensor/manager/${t}/${e}/bundle.js`},parameterBlacklist:{configure:["panelIdentifier","panelVendorId"]}},iomp:{bit:4,tcf:{consent:[1,8],vendor:730},cdn:{host:({country:e})=>"at"===e?"script-at.iocnt.net":"script.ioam.de",path:({ecmaVersion:e,variant:t,version:r})=>`/sensor/${r}/manager/${t}/${e}/bundle.js`},parameterBlacklist:{configure:[]}}},modules:{qds:{cdn:{host:({country:e})=>"at"===e?"script-at.iocnt.net":"script.ioam.de",path:({ecmaVersion:e,version:t})=>`/3p/qds/${t}/manager/base/${e}/bundle.js`},tcf:{consent:[1,9],vendor:785},parameterBlacklist:{configure:["panelIdentifier","panelVendorId"]}}},tcf:{vendors:[730,785],frequency:100,max:10,wait:5e3,events:["tcloaded","useractioncomplete"]},cdn:["dsn","script.ioam.de"],hybrid:{performSiteCheck:!1,apiKeys:e=>"at"===e?{ios:"IOMbOEWAHybridMessageHandler",android:"IOMbOEWAHybridBridge"}:{ios:"IOMbHybridMessageHandler",android:"IOMbHybridBridge"}},metaTags:{loading:"iomm_config_loading"}};const qc=1,kc=2,Bc=3,$c=e=>xc.sensors[e]?{name:e,...xc.sensors[e]}:xc.modules[e]?{name:e,...xc.modules[e]}:null;var zc=(e=qc)=>{const t=[];return e!==qc&&e!==kc||Object.keys(xc.sensors).forEach((e=>{t.push({name:e,...xc.sensors[e]})})),e!==qc&&e!==Bc||Object.keys(xc.modules).forEach((e=>{t.push({name:e,...xc.modules[e]})})),t};const Yc={iomb:"IOMb",iomp:"IOMp",qds:"IOMp3pQds"};class Hc extends Z{constructor(e,t,r=xc){if(super(),this.moduleId=4,void 0===e)throw new Jt(4,1,this.moduleId,1,1);this.dataLayer=e,this.manager=t,this.settings=r}load(t,r,n=!1){return new Promise(((a,i)=>{try{const s={category:jc.CATEGORIES.SENSOR},o=this.dataLayer.getItem(r,s);if(o&&void 0===o.value){const o={url:t},{value:c="async"}=this.dataLayer.getItem("loading",{category:jc.CATEGORIES.GLOBAL});o[c]=c,r!==Hc.BUNDLE_VARIANTS.IOMP&&r!==Hc.BUNDLE_VARIANTS.QDS&&(o.crossOrigin="anonymous"),e(o).then((()=>{const e=Yc[r],t=window[e];t?(n||delete window[e],this.dataLayer.setItem(r,"function"==typeof t?t:()=>t,s),a()):i(new Jt(3,1,this.moduleId,2,2))})).catch((e=>{i(new Jt(3,1,this.moduleId,2,1,e.message))}))}else a()}catch(e){i(new Jt(3,1,this.moduleId,2,3,e.message))}}))}generateSensorUrl(e){const t=$c(e.sensorVariant);if(void 0===e.sensorVariant||void 0===t)throw new Jt(3,1,this.moduleId,3,1);const r=this.dataLayer.getItem("country",{category:jc.CATEGORIES.GLOBAL}).value;let a="base";const i=this.settings.hybrid.apiKeys;e.sensorVariant!==Hc.BUNDLE_VARIANTS.IOMB&&e.sensorVariant!==Hc.BUNDLE_VARIANTS.IOMP||!function(e,t,r=Gc.ALL){const{value:a}=e.dataLayer.getItem("hybrid",{category:"global"}),i=n(t),s=Object.keys(t),o=e.commandProcessor.history.has(6)||e.commandProcessor.commandQueue.queue.items.findIndex((([e])=>"smi"===e||"setMultiIdentifier"===e))>-1;return r===Gc.IOMB_ONLY?!0===a&&s.includes(i):r===Gc.IOMP_ONLY?!0===a&&o:!0===a&&(s.includes(i)||o)}(this.manager,i(r),Gc.IOMB_ONLY)||(a="hybrid");const{value:s}=this.dataLayer.getItem(t.name,{category:jc.CATEGORIES.VERSION});let o=(0,t.cdn.host)({country:r});"dsn"===o&&(o=this.dataLayer.getItem("domainServiceName",{category:jc.CATEGORIES.GLOBAL}).value);const c={ecmaVersion:window[window.IOMmGlobalObject].esm?"es6":"es5",variant:a,version:s||"latest"};return`//${o}${(0,t.cdn.path)(c)}`}generateModuleUrl(e){const t=$c(e.moduleVariant);if(void 0===e.moduleVariant||void 0===t)throw new Jt(3,1,this.moduleId,4,1);const{value:r}=this.dataLayer.getItem(t.name,{category:jc.CATEGORIES.VERSION});let n=(0,t.cdn.host)({country:this.dataLayer.getItem("country",{category:jc.CATEGORIES.GLOBAL}).value});"dsn"===n&&(n=this.dataLayer.getItem("domainServiceName",{category:jc.CATEGORIES.GLOBAL}).value);const a={ecmaVersion:window[window.IOMmGlobalObject].esm?"es6":"es5",version:r||"latest"};return`//${n}${(0,t.cdn.path)(a)}`}}Hc.BUNDLE_VARIANTS={IOMB:"iomb",IOMP:"iomp",QDS:"qds"},Hc.LOADING_METHODS={ASYNC:"async",DEFER:"defer"},Hc.LOADING_STATUS={LOADING:1,LOADED:2,LOADING_FAILED:3};const Qc=e=>{window.__tcfapi("removeEventListener",2,(()=>{}),e)},Jc=(e,t)=>{e&&e.listenerId>=0&&(t.stopPolling?Qc(e.listenerId):t.tcfApiListenerIds.push(e.listenerId))},Xc=e=>(t,r)=>{try{if(Jc(t,e),e.stopPolling)return;let n;r&&e.settings.tcf.events.includes(t.eventStatus)&&!0===t.gdprApplies?(n=e.convert(t),e.emit(Wc.EVENTS.TCF_DATA_PROCESSED),window.__tcfapi("removeEventListener",2,(()=>{}),t.listenerId)):(n=wc.create(e.vendors,[[0],[0]],wc.TYPES.TCF2X),e.emit(Wc.EVENTS.TCF_DATA_CANNOT_BE_PROCESSED)),e.dataLayer.setItem("consentString",n,{category:jc.CATEGORIES.TCF})}catch(t){const r=new Jt(Jt.TYPES.ERROR,3,6,1,1,t.message);e.emit(Wc.EVENTS.TCF_DATA_PROCESSING_ERROR,r)}},Zc=e=>{e.stopPolling||(window.__tcfapi&&"function"==typeof window.__tcfapi?(window.__tcfapi("addEventListener",2,Xc(e)),window.__tcfapi("addEventListener",2,(e=>(t,r)=>{Jc(t,e),e.stopPolling||r&&"cmpuishown"===t.eventStatus&&window.__tcfapi("addEventListener",2,Xc(e))})(e))):(e.numberOfTries<e.settings.tcf.max+1?setTimeout((()=>{Zc(e)}),e.numberOfTries<e.settings.tcf.max?e.settings.tcf.frequency:e.settings.tcf.wait):e.emit(Wc.EVENTS.TCF_API_NOT_ACCESSIBLE),e.numberOfTries+=1))};class Wc extends Lc{constructor(e,t,r=xc){super(e),this.moduleId=6,this.vendors=e,this.dataLayer=t,this.numberOfTries=0,this.stopPolling=!1,this.tcfApiListenerIds=[],this.settings=r}process(){try{Zc(this)}catch(e){const t=new Jt(Jt.TYPES.ERROR,3,this.moduleId,5,1,e.message);throw this.emit(Wc.EVENTS.TCF_DATA_PROCESSING_ERROR,t),t}}stop(){try{this.tcfApiListenerIds.forEach((e=>{Qc(e)})),this.stopPolling=!0}catch(e){const t=new Jt(Jt.TYPES.ERROR,3,this.moduleId,6,1,e.message);throw this.emit(Wc.EVENTS.TCF_API_CANNOT_STOP,t),t}}}Wc.EVENTS={TCF_DATA_PROCESSED:"TCF_DATA_PROCESSED",TCF_DATA_CANNOT_BE_PROCESSED:"TCF_DATA_CANNOT_BE_PROCESSED",TCF_API_NOT_ACCESSIBLE:"TCF_API_NOT_ACCESSIBLE",TCF_DATA_PROCESSING_ERROR:"TC_DATA_PROCESSING_ERROR",TCF_API_CANNOT_STOP:"TCF_API_CANNOT_STOP"};var Kc=e=>{try{e.handledBfCache||(window.addEventListener("pageshow",(t=>{if(!0===t.persisted){const t=e.dataLayer.getItems(["code","comment","pixelType"],{category:"measurement"}).reduce(((e,{key:t,value:r})=>(e[t]=r,e)),{});setTimeout((()=>{e.command("pageview",t)}),0)}})),e.handledBfCache=!0)}catch(t){e.emit("EXECUTION_ERROR",t)}};var eu=(e,t)=>{try{const r=new wc(wc.TYPES.NONE,parseInt(e.substring(2),16),t.settings.tcf.vendors);if(r.toString(16)!==`00${e.substring(2)}`){throw new Jt(Jt.TYPES.ERROR,3,1,3,1)}return t.tcfProcessor.stop(),r}catch(e){return t.emit("MANUAL_CONSENT_ERROR",e),null}};var tu=(e,t)=>{e!==Hc.LOADING_METHODS.ASYNC&&e!==Hc.LOADING_METHODS.DEFER||t.dataLayer.setItem("loading",e,{category:jc.CATEGORIES.GLOBAL})};var ru=(e,t,r)=>{const n=t.toLowerCase().replace("v.","").replace("v","");if(n.match(/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/)){if(e.includes("iomm_config_version_sensor")){zc(kc).forEach((t=>{e.toLowerCase()===`iomm_config_version_sensor_${t.name}`&&r.dataLayer.setItem(t.name,n,{category:jc.CATEGORIES.VERSION})}))}if(e.includes("iomm_config_version_3p")||e.includes("iomm_config_version_ext")){zc(Bc).forEach((n=>{e.toLowerCase()!==`iomm_config_version_3p_${n.name}`&&e.toLowerCase()!==`iomm_config_version_ext_${n.name}`||r.dataLayer.setItem(n.name,t,{category:jc.CATEGORIES.VERSION})}))}}};var nu=e=>{try{document.querySelectorAll("meta").forEach((t=>{const r=t.getAttribute("name"),n=t.getAttribute("content");r&&n&&(r===e.settings.metaTags.loading&&tu(n,e),r.includes("iomm_config_version")&&ru(r,n,e))}))}catch(t){const r=new Jt(Jt.TYPES.ERROR,3,1,4,1,t.message);e.emit("EXECUTION_ERROR",r)}};const au=(e,t)=>{try{const{value:r}=t.dataLayer.getItem("methods",{category:jc.CATEGORIES.GLOBAL});e.filter((e=>void 0===e.bit||(r&e.bit)===e.bit)).forEach((e=>{let r=!e.tcf;const n=t.dataLayer.getItem(e.name,{category:jc.CATEGORIES.SENSOR});if(e.tcf){const{value:a}=t.dataLayer.getItem("consentString",{category:jc.CATEGORIES.TCF});a&&a instanceof wc?(r=a.check(e.tcf.vendor,e.tcf.consent),r?(n.value||t.commandDispatcher.activate(e.name),t.dataLayer.on(jc.generateDataMutationEventName(jc.MUTATION_EVENTS.SET,jc.CATEGORIES.TCF,"consentString"),(()=>{iu([e],t)}))):t.dataLayer.once(jc.generateDataMutationEventName(jc.MUTATION_EVENTS.SET,jc.CATEGORIES.TCF,"consentString"),(()=>{au([e],t)}))):t.dataLayer.once(jc.generateDataMutationEventName(jc.MUTATION_EVENTS.SET,jc.CATEGORIES.TCF,"consentString"),(()=>{au([e],t)}),e.name)}else t.commandDispatcher.activate(e.name);if(n.value)t.commandDispatcher.addFacade(e.name,n.value);else if(r){let r;t.dataLayer.once(jc.generateDataMutationEventName(jc.MUTATION_EVENTS.SET,jc.CATEGORIES.SENSOR,e.name),(()=>{au([e],t)})),r=Object.keys(t.settings.sensors).includes(e.name)?t.bundleLoader.generateSensorUrl({sensorVariant:e.name}):t.bundleLoader.generateModuleUrl({moduleVariant:e.name});const{value:n}=t.dataLayer.getItem(e.name,{category:jc.CATEGORIES.BUNDLE_LOADED});n||(t.dataLayer.setItem(e.name,Hc.LOADING_STATUS.LOADING,{category:jc.CATEGORIES.BUNDLE_LOADED}),t.bundleLoader.load(r,e.name,e.cdn.static).then((()=>{t.dataLayer.setItem(e.name,Hc.LOADING_STATUS.LOADED,{category:jc.CATEGORIES.BUNDLE_LOADED})})).catch((r=>{t.emit("EXECUTION_ERROR",r),t.dataLayer.setItem(e.name,Hc.LOADING_STATUS.LOADING_FAILED,{category:jc.CATEGORIES.BUNDLE_LOADED})})))}}))}catch(e){t.emit("EXECUTION_ERROR",e)}},iu=(e,t)=>{try{e.filter((e=>{const{value:r}=t.dataLayer.getItem("methods",{category:jc.CATEGORIES.GLOBAL});return void 0===e.bit||(r&e.bit)===e.bit})).forEach((e=>{const{value:r}=t.dataLayer.getItem("consentString",{category:jc.CATEGORIES.TCF});if(r&&r instanceof wc){if(!1===r.check(e.tcf.vendor,e.tcf.consent))t.commandDispatcher.removeFacade(e.name),t.commandDispatcher.deactivate(e.name);else{const r=t.dataLayer.getItem(e.name,{category:jc.CATEGORIES.SENSOR});r&&r.value?(t.commandDispatcher.addFacade(e.name,r.value),t.commandDispatcher.activate(e.name)):au([e],t)}}}))}catch(e){t.emit("EXECUTION_ERROR",e)}};class su extends Z{constructor(e,t=xc){super(),this.moduleId=1,this.commandQueue=e,this.commandProcessor=new Aa(e,Gi,{fillParameters:!0,maxExecutionBeforeStop:3}),this.dataLayer=new jc,this.commandDispatcher=new Fc(this,zc(kc)),this.settings=t,this.bundleLoader=new Hc(this.dataLayer,this,this.settings),this.tcfProcessor=new Wc(this.settings.tcf.vendors,this.dataLayer,this.settings),this.skipExecution=!1,this.handledBfCache=!1,this.tcfProcessor.process(),nu(this)}command(e,...t){try{this.commandProcessor.commandSerializer.reset();const r=this.commandProcessor.process(e,...t);if(r&&r.parameters){switch(e){case su.COMMANDS.CONFIGURE:if(r.parameters.consentString){const e=eu(r.parameters.consentString,this);e&&e instanceof wc&&(r.parameters.consentString=e.toString(16),this.dataLayer.setItem("consentString",e,{category:jc.CATEGORIES.TCF})),null===e&&delete r.parameters.consentString}this.dataLayer.setItems(Object.keys(r.parameters),Object.values(r.parameters),{category:jc.CATEGORIES.GLOBAL}),au(zc(kc),this);break;case su.COMMANDS.PAGEVIEW:this.dataLayer.deleteItem("event",{category:jc.CATEGORIES.MEASUREMENT}),this.dataLayer.setItems(Object.keys(r.parameters),Object.values(r.parameters),{category:jc.CATEGORIES.MEASUREMENT}),Kc(this);break;case su.COMMANDS.THIRD_PARTY_MODULES:$c(r.parameters.thirdPartyModule)&&((e,t)=>{try{const r=$c(e.thirdPartyModule),{surveyType:n}=e;t.commandDispatcher.addModule(r.name,r);const[{value:a},{value:i}]=t.dataLayer.getItems(["site","country"],{category:jc.CATEGORIES.GLOBAL}),[{value:s},{value:o}]=t.dataLayer.getItems(["code","pixelType"],{category:jc.CATEGORIES.MEASUREMENT}),c={st:a,cn:i,cp:s,pt:o,sv:n};t.commandDispatcher.enqueueToSingleModule(r.name,"configure",c),au([r],t)}catch(e){t.emit(su.EVENTS.EXECUTION_ERROR,e)}})(r.parameters,this),this.skipExecution=!0;break;case su.COMMANDS.EVENT:this.dataLayer.setItem("event",r.parameters.event,{category:jc.CATEGORIES.MEASUREMENT});break;case su.COMMANDS.SET_MULTI_IDENTIFIER:this.dataLayer.setItem("multiIdentifier",r.parameters.multiIdentifier,{category:jc.CATEGORIES.GLOBAL}),this.commandDispatcher.enqueueToSingleModule(Hc.BUNDLE_VARIANTS.IOMP,su.COMMANDS.SET_MULTI_IDENTIFIER,r.parameters.multiIdentifier),this.skipExecution=!0}return!1===this.skipExecution&&this.commandDispatcher.enqueue(e,r.parameters),void(this.skipExecution=!1)}throw new Jt(Jt.TYPES.FATAL,3,1,1,1,this.commandProcessor.commandSerializer.lastAssertion)}catch(e){throw e instanceof Jt?e:new Jt(Jt.TYPES.FATAL,3,1,1,2,e.message)}}}function ou(e){const t=new su(e);return{cf(...e){t.command(su.COMMANDS.CONFIGURE,...e)},configure(...e){t.command(su.COMMANDS.CONFIGURE,...e)},pv(...e){t.command(su.COMMANDS.PAGEVIEW,...e)},pageview(...e){t.command(su.COMMANDS.PAGEVIEW,...e)},sm(...e){t.command(su.COMMANDS.SET_MODE,...e)},setMode(...e){t.command(su.COMMANDS.SET_MODE,...e)},"3p"(...e){t.command(su.COMMANDS.THIRD_PARTY_MODULES,...e)},thirdPartyModules(...e){t.command(su.COMMANDS.THIRD_PARTY_MODULES,...e)},event(...e){t.command(su.COMMANDS.EVENT,...e)},ev(...e){t.command(su.COMMANDS.EVENT,...e)},hybrid(...e){t.command(su.COMMANDS.HYBRID,...e)},hy(...e){t.command(su.COMMANDS.HYBRID,...e)},smi(...e){t.command(su.COMMANDS.SET_MULTI_IDENTIFIER,...e)},setMultiIdentifier(...e){t.command(su.COMMANDS.SET_MULTI_IDENTIFIER,...e)}}}su.COMMANDS={CONFIGURE:"configure",PAGEVIEW:"pageview",HYBRID:"hybrid",EVENT:"event",SET_MODE:"setMode",THIRD_PARTY_MODULES:"thirdPartyModules",SET_MULTI_IDENTIFIER:"setMultiIdentifier"},su.MODULES={QDS:"qds"},su.EVENTS={COMMAND_DOES_NOT_EXIST:"COMMAND_DOES_NOT_EXIST",EXECUTION_ERROR:"EXECUTION_ERROR",MANUAL_CONSENT_ERROR:"MANUAL_CONSENT_ERROR"};const cu="IOMmGlobalObject"in window?window.IOMmGlobalObject:window.IOMmGlobalObject="IOMm",uu=window[cu]||(window[cu]=(...e)=>{(window[cu].q=window[cu].q||[]).push(...e)});uu.version="1.9.0",window.iom||(window.iom={},window.iom.smi=window.iom.setMultiIdentifier=e=>uu("setMultiIdentifier",e)),uu.q=new Wt(ou,{multiTenancy:!0},uu.q),uu.create=ou}();
